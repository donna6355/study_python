-- DDL 

-- 테이블 삭제 (테이블이 없을 경우 오류발생은 정상입니다) 
DROP TABLE DEPT ;            --부서정보 
DROP TABLE EMP ;             --사원정보 
DROP TABLE LG_MEMBER ;       --서비스사용자정보
DROP TABLE LG_PRODUCT ;      --LG상품정보
DROP TABLE PRODUCT_REVIEW ;  --상품리뷰
DROP TABLE MEMBER_PURCHASE ; --서비스사용자상품구매정보
DROP TABLE AS_REQUEST ;      --AS요청 


-- EMP 테이블
CREATE TABLE EMP (
  EMP_ID        VARCHAR2(20) PRIMARY KEY,
  NAME          VARCHAR2(50) NOT NULL ,
  GENDER        VARCHAR2(10) NOT NULL ,
  BIRTH_DATE    VARCHAR2(8)  NOT NULL ,
  HIRE_DATE     VARCHAR2(8),
  JOB_TITLE     VARCHAR2(50),
  JOB_LEVEL     VARCHAR2(10),
  DEPT_NO       VARCHAR2(10),
  LEAVE_AMOUNT  NUMBER(3),
  RETIRE_YN     CHAR(1),
  RETIRE_DATE   DATE,
  CREATED_AT    DATE
);

COMMENT ON COLUMN EMP.EMP_ID IS '사번 (고유값)';
COMMENT ON COLUMN EMP.NAME IS '이름';
COMMENT ON COLUMN EMP.GENDER IS '성별';
COMMENT ON COLUMN EMP.BIRTH_DATE IS '생년월일(YYYYMMDD)';
COMMENT ON COLUMN EMP.HIRE_DATE IS '입사일';
COMMENT ON COLUMN EMP.JOB_TITLE IS '직책 (선임 , 책임 , 수석 , 팀장 등)';
COMMENT ON COLUMN EMP.JOB_LEVEL IS '직급 등급 (P1 , P2 , P3 등)';
COMMENT ON COLUMN EMP.DEPT_NO IS '소속 부서 (외래키)';
COMMENT ON COLUMN EMP.LEAVE_AMOUNT IS '보유연차수';
COMMENT ON COLUMN EMP.RETIRE_YN IS '퇴직여부 (Y/N)';
COMMENT ON COLUMN EMP.RETIRE_DATE IS '퇴직일자';
COMMENT ON COLUMN EMP.CREATED_AT IS '생성일시';

-- DEPT 테이블
CREATE TABLE DEPT (
  DEPT_NO        VARCHAR2(10) PRIMARY KEY,
  DEPT_NAME      VARCHAR2(100),
  DEPT_EN_NAME   VARCHAR2(100),
  LOCATION       VARCHAR2(100),
  CREATED_AT     DATE
);

COMMENT ON COLUMN DEPT.DEPT_NO IS '부서번호 (고유값)';
COMMENT ON COLUMN DEPT.DEPT_NAME IS '부서명';
COMMENT ON COLUMN DEPT.DEPT_EN_NAME IS '부서 영어명';
COMMENT ON COLUMN DEPT.LOCATION IS '부서 위치';
COMMENT ON COLUMN DEPT.CREATED_AT IS '생성일시';

CREATE TABLE LG_MEMBER (
  MEMBER_ID     VARCHAR2(30) PRIMARY KEY,
  PASSWD        VARCHAR2(255) NOT NULL, 
  MEMBER_NAME   VARCHAR2(100) NOT NULL,
  EMAIL         VARCHAR2(150) NOT NULL,
  PHONE_NUMBER  VARCHAR2(20),
  ADDRESS       VARCHAR2(300),
  JOIN_DATE     DATE          DEFAULT SYSDATE,
  STATUS        VARCHAR2(20)  DEFAULT 'ACTIVE',
  CREATED_AT    DATE          DEFAULT SYSDATE
);

ALTER TABLE LG_MEMBER
  ADD CONSTRAINT UQ_LG_MEMBER_EMAIL UNIQUE (EMAIL);

COMMENT ON COLUMN LG_MEMBER.MEMBER_ID   IS '서비스 사용자 ID (고유값)';
COMMENT ON COLUMN LG_MEMBER.PASSWD      IS '사용자 패스워드';
COMMENT ON COLUMN LG_MEMBER.MEMBER_NAME IS '사용자 이름';
COMMENT ON COLUMN LG_MEMBER.EMAIL       IS '이메일 (로그인 계정, UNIQUE)';
COMMENT ON COLUMN LG_MEMBER.PHONE_NUMBER IS '연락처';
COMMENT ON COLUMN LG_MEMBER.ADDRESS     IS '주소';
COMMENT ON COLUMN LG_MEMBER.JOIN_DATE   IS '가입일';
COMMENT ON COLUMN LG_MEMBER.STATUS      IS '사용자 상태 (ACTIVE/SUSPENDED 등)';
COMMENT ON COLUMN LG_MEMBER.CREATED_AT  IS '생성 일시';


CREATE TABLE LG_PRODUCT (
  PRODUCT_ID    NUMBER         PRIMARY KEY,
  PRODUCT_NAME  VARCHAR2(200)  NOT NULL,
  CATEGORY      VARCHAR2(100),
  PRICE         NUMBER(12,0),
  STOCK_QTY     NUMBER         DEFAULT 0,
  CREATED_AT    DATE           DEFAULT SYSDATE
);

COMMENT ON COLUMN LG_PRODUCT.PRODUCT_ID   IS '상품 ID (고유값)';
COMMENT ON COLUMN LG_PRODUCT.PRODUCT_NAME IS '상품명';
COMMENT ON COLUMN LG_PRODUCT.CATEGORY     IS '상품 카테고리';
COMMENT ON COLUMN LG_PRODUCT.PRICE        IS '가격';
COMMENT ON COLUMN LG_PRODUCT.STOCK_QTY    IS '재고 수량';
COMMENT ON COLUMN LG_PRODUCT.CREATED_AT   IS '등록 일시';


CREATE TABLE PRODUCT_REVIEW (
  REVIEW_ID    NUMBER          PRIMARY KEY,
  PRODUCT_ID   NUMBER          NOT NULL,
  RATING       NUMBER(1)       NOT NULL,
  REVIEW_TEXT  VARCHAR2(4000),
  CREATED_AT   DATE            DEFAULT SYSDATE,
  CONSTRAINT CK_REVIEW_RATING CHECK (RATING BETWEEN 1 AND 5)
);

COMMENT ON COLUMN PRODUCT_REVIEW.REVIEW_ID   IS '리뷰 ID (고유값)';
COMMENT ON COLUMN PRODUCT_REVIEW.PRODUCT_ID  IS '상품 ID (외래키)';
COMMENT ON COLUMN PRODUCT_REVIEW.RATING      IS '평점 (1~5점)';
COMMENT ON COLUMN PRODUCT_REVIEW.REVIEW_TEXT IS '리뷰 내용';
COMMENT ON COLUMN PRODUCT_REVIEW.CREATED_AT  IS '작성 일시';


CREATE TABLE MEMBER_PURCHASE (
  PURCHASE_ID   NUMBER         PRIMARY KEY,
  MEMBER_ID     VARCHAR2(30)   NOT NULL,
  PRODUCT_ID    NUMBER         NOT NULL,
  QUANTITY      NUMBER         DEFAULT 1 NOT NULL,
  TOTAL_PRICE   NUMBER(12,0),
  PURCHASE_DATE DATE           DEFAULT SYSDATE
);

COMMENT ON COLUMN MEMBER_PURCHASE.PURCHASE_ID   IS '구매 ID (고유값)';
COMMENT ON COLUMN MEMBER_PURCHASE.MEMBER_ID     IS '구매자 (외래키)';
COMMENT ON COLUMN MEMBER_PURCHASE.PRODUCT_ID    IS '구매 상품 (외래키)';
COMMENT ON COLUMN MEMBER_PURCHASE.QUANTITY      IS '구매 수량';
COMMENT ON COLUMN MEMBER_PURCHASE.TOTAL_PRICE   IS '총 결제 금액';
COMMENT ON COLUMN MEMBER_PURCHASE.PURCHASE_DATE IS '구매 일시';


CREATE TABLE AS_REQUEST (
  REQUEST_ID    NUMBER         PRIMARY KEY,
  PURCHASE_ID   NUMBER         NOT NULL,
  REQUEST_DATE  DATE           DEFAULT SYSDATE,
  STATUS        VARCHAR2(20)   DEFAULT 'REQUESTED',
  DESCRIPTION   VARCHAR2(2000),
  COMPLETED_AT  DATE
);

COMMENT ON COLUMN AS_REQUEST.REQUEST_ID   IS 'AS 요청 ID (고유값)';
COMMENT ON COLUMN AS_REQUEST.PURCHASE_ID  IS '구매 ID (외래키)';
COMMENT ON COLUMN AS_REQUEST.REQUEST_DATE IS 'AS 요청 일자';
COMMENT ON COLUMN AS_REQUEST.STATUS       IS 'AS 상태 (REQUESTED/IN_PROGRESS/DONE 등)';
COMMENT ON COLUMN AS_REQUEST.DESCRIPTION  IS 'AS 요청 상세 내용';
COMMENT ON COLUMN AS_REQUEST.COMPLETED_AT IS 'AS 완료 일시';


UPDATE AS_REQUEST SET PURCHASE_ID = ROWNUM ;
COMMIT; 

-- 이건 추후에 활용 
DROP TABLE DB_PROBLEM_TAG;
DROP TABLE DB_TAG; 
DROP TABLE USER_PROBLEM_ACCESS ; 
DROP TABLE USER_PROBLEM_ATTEMPT ; 
DROP TABLE APP_USER ; 
DROP TABLE DB_PROBLEM ; 
DROP TABLE USER_PROBLEM ; 

-- 1) 사용자(평문 비밀번호 저장: 교육용)
CREATE TABLE APP_USER (
  USER_ID         VARCHAR2(50) PRIMARY KEY,
  PASSWORD_PLAIN  VARCHAR2(200) NOT NULL,
  CREATED_AT      TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

-- 2) 문제 마스터(문제/정답은 DB에 저장)
CREATE TABLE DB_PROBLEM (
  PROBLEM_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  TITLE         VARCHAR2(200) NOT NULL,
  DESCRIPTION   CLOB NOT NULL,
  EXPECTED_SQL  CLOB NOT NULL,
  DIFFICULTY    VARCHAR2(20),
  IS_ACTIVE     CHAR(1) DEFAULT 'Y' CHECK (IS_ACTIVE IN ('Y','N')),
  CREATED_AT    TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

-- 3) 사용자-문제 상태(집계용: 언제 접근/시작/시도/실패/성공/점수)
CREATE TABLE USER_PROBLEM (
  USER_ID            VARCHAR2(50) NOT NULL,
  PROBLEM_ID         NUMBER NOT NULL,
  FIRST_ACCESSED_AT  TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,  -- 최초 접근
  STARTED_AT         TIMESTAMP NULL,                            -- 풀이 시작(첫 제출 시점)
  SOLVED_AT          TIMESTAMP NULL,                            -- 정답 처리 시점
  ATTEMPTS           NUMBER DEFAULT 0 NOT NULL,
  FAILURES           NUMBER DEFAULT 0 NOT NULL,
  SUCCESSES          NUMBER DEFAULT 0 NOT NULL,
  BEST_SCORE         NUMBER DEFAULT 0 NOT NULL,
  LAST_SCORE         NUMBER DEFAULT 100 NOT NULL,
  LAST_ATTEMPT_AT    TIMESTAMP NULL,
  CONSTRAINT PK_USER_PROBLEM PRIMARY KEY (USER_ID, PROBLEM_ID)
);

-- 4) 문제 접근 로그(문제 페이지 열 때마다 쌓임: “언제 접근했는지”를 더 정교하게)
CREATE TABLE USER_PROBLEM_ACCESS (
  ACCESS_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USER_ID      VARCHAR2(50) NOT NULL,
  PROBLEM_ID   NUMBER NOT NULL,
  ACCESSED_AT  TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

-- 5) 시도(제출) 로그(제출 SQL/정오/점수/에러/시간)
CREATE TABLE USER_PROBLEM_ATTEMPT (
  ATTEMPT_ID      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USER_ID         VARCHAR2(50) NOT NULL,
  PROBLEM_ID      NUMBER NOT NULL,
  ATTEMPT_NO      NUMBER NOT NULL,
  SUBMITTED_SQL   CLOB NOT NULL,
  IS_CORRECT      CHAR(1) NOT NULL CHECK (IS_CORRECT IN ('Y','N')),
  SCORE_AFTER     NUMBER NOT NULL,
  ERROR_MESSAGE   VARCHAR2(4000),
  EXEC_MS         NUMBER,
  SUBMITTED_AT    TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

ALTER TABLE APP_USER ADD (
  ROLE VARCHAR2(20) DEFAULT 'STUDENT' NOT NULL
);
ALTER TABLE DB_PROBLEM ADD (
  EXPECTED_COLS             VARCHAR2(1000), -- 예: "DEPTNO,AVG_SAL"
  REQUIRE_ORDER_BY          CHAR(1) DEFAULT 'N' CHECK (REQUIRE_ORDER_BY IN ('Y','N')),
  REQUIRE_ORDERED_RESULT    CHAR(1) DEFAULT 'N' CHECK (REQUIRE_ORDERED_RESULT IN ('Y','N')),
  REQUIRE_EXACT_COLNAMES    CHAR(1) DEFAULT 'N' CHECK (REQUIRE_EXACT_COLNAMES IN ('Y','N')),
  REQUIRE_EXACT_TYPES       CHAR(1) DEFAULT 'N' CHECK (REQUIRE_EXACT_TYPES IN ('Y','N')),
  CREATED_BY                VARCHAR2(50)
);

CREATE TABLE DB_TAG (
  TAG_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  TAG_NAME  VARCHAR2(50) UNIQUE NOT NULL
);

CREATE TABLE DB_PROBLEM_TAG (
  PROBLEM_ID NUMBER NOT NULL,
  TAG_ID     NUMBER NOT NULL,
  CONSTRAINT PK_PROBLEM_TAG PRIMARY KEY (PROBLEM_ID, TAG_ID),
  CONSTRAINT FK_PT_PROB FOREIGN KEY (PROBLEM_ID) REFERENCES DB_PROBLEM(PROBLEM_ID),
  CONSTRAINT FK_PT_TAG  FOREIGN KEY (TAG_ID) REFERENCES DB_TAG(TAG_ID)
);

-- 추후 활용 
DROP TABLE BOUNCE_METRICS_DAILY CASCADE CONSTRAINTS;
DROP TABLE SESSION_METRICS_DAILY CASCADE CONSTRAINTS;
DROP TABLE SESSION_METRICS_DETAIL CASCADE CONSTRAINTS;
DROP TABLE PRODUCT_METRICS_DAILY CASCADE CONSTRAINTS;

-- RAW_EVENTS (원본 이벤트 로그)
DROP TABLE RAW_EVENTS CASCADE CONSTRAINTS;

-- 비즈니스 테이블 (장바구니, 구매 등)
DROP TABLE CART_ITEMS CASCADE CONSTRAINTS;

CREATE TABLE RAW_EVENTS (
  EVENT_ID           VARCHAR2(50)   PRIMARY KEY,  -- 각 로그 라인 고유 ID (UUID 등)
  MEMBER_ID          VARCHAR2(30),
  SESSION_ID         VARCHAR2(50),                -- 로그인 ~ 로그아웃 사이 세션
  EVENT_TYPE         VARCHAR2(30),                -- 'login','logout','search','view_product',...
  PAGE_URL           VARCHAR2(200),
  PRODUCT_ID         VARCHAR2(10),

  TS_ORIG            VARCHAR2(40),   -- 원본 ts 문자열(디버깅용 그대로)
  EVENT_TS           TIMESTAMP,      -- 파싱된 타임스탬프
  EVENT_DATE         DATE,           -- 일 단위(=TRUNC(EVENT_TS))

  IS_PRODUCT_ACTION  CHAR(1),        -- 'Y' or 'N' (상품 맥락 이벤트인지)

  DETAILS_STR        CLOB,           -- details 전체(JSON string 그대로)
  SEARCH_KEYWORD     VARCHAR2(400),  -- search.keyword 등
  SELECTED_CATEGORY  VARCHAR2(400),  -- filter_change.category 등
  SORT_OPTION        VARCHAR2(100),  -- sort_change.sort 등
  AS_MESSAGE         VARCHAR2(2000)  -- as_request.message 등 (유저 불만 내용)
);

COMMENT ON TABLE RAW_EVENTS IS '웹/앱 사용자 행동 로그 (ETL로 적재된 원시 이벤트; 전처리 후)';
COMMENT ON COLUMN RAW_EVENTS.EVENT_ID           IS '원시 로그 고유 ID, 중복 방지 키';
COMMENT ON COLUMN RAW_EVENTS.SESSION_ID         IS '로그인~로그아웃 세션 식별자';
COMMENT ON COLUMN RAW_EVENTS.EVENT_TYPE         IS '행동 유형 (login, view_product, purchase 등)';
COMMENT ON COLUMN RAW_EVENTS.PAGE_URL           IS '행동이 일어난 페이지 (/products 등)';
COMMENT ON COLUMN RAW_EVENTS.PRODUCT_ID         IS '상품 관련 이벤트일 경우 대상 상품';
COMMENT ON COLUMN RAW_EVENTS.TS_ORIG            IS '수집 당시 ts 문자열(원본 보존)';
COMMENT ON COLUMN RAW_EVENTS.EVENT_TS           IS '파싱된 타임스탬프 (UTC 기준 등)';
COMMENT ON COLUMN RAW_EVENTS.EVENT_DATE         IS 'TRUNC(EVENT_TS), 일 단위 분석용';
COMMENT ON COLUMN RAW_EVENTS.IS_PRODUCT_ACTION  IS '상품관심/구매/리뷰/AS 등 상품 맥락 여부 Y/N';
COMMENT ON COLUMN RAW_EVENTS.DETAILS_STR        IS '검색어/필터/정렬/AS요청 등의 원본 details JSON';
COMMENT ON COLUMN RAW_EVENTS.SEARCH_KEYWORD     IS '검색어 등 텍스트 인텐트';
COMMENT ON COLUMN RAW_EVENTS.SELECTED_CATEGORY  IS '선택한 카테고리 필터';
COMMENT ON COLUMN RAW_EVENTS.SORT_OPTION        IS '정렬 기준 (price_asc 등)';
COMMENT ON COLUMN RAW_EVENTS.AS_MESSAGE         IS 'AS 요청 본문, 불만/고장 내용';

-- 성능을 위한 보조 인덱스 추천 (선택)
CREATE INDEX IDX_RAW_EVENTS_DATE ON RAW_EVENTS (EVENT_DATE);
CREATE INDEX IDX_RAW_EVENTS_PROD ON RAW_EVENTS (PRODUCT_ID);
CREATE INDEX IDX_RAW_EVENTS_TYPE ON RAW_EVENTS (EVENT_TYPE);


CREATE TABLE PRODUCT_METRICS_DAILY (
  METRIC_DATE          DATE,
  PRODUCT_ID           VARCHAR2(10),
  VIEW_COUNT           NUMBER,
  ADD_TO_CART_COUNT    NUMBER,
  PURCHASE_COUNT       NUMBER,
  REVIEW_COUNT         NUMBER,
  AS_REQUEST_COUNT     NUMBER,
  CONVERSION_RATE      NUMBER(10,4),  -- PURCHASE_COUNT / VIEW_COUNT
  CONSTRAINT PK_PRODUCT_METRICS_DAILY
    PRIMARY KEY (METRIC_DATE, PRODUCT_ID)
);

COMMENT ON TABLE PRODUCT_METRICS_DAILY IS
'일자별 상품 관심/구매/불만 KPI 마트 (뷰/장바구니/구매/리뷰/AS요청/전환율).';

COMMENT ON COLUMN PRODUCT_METRICS_DAILY.METRIC_DATE IS '일자';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.VIEW_COUNT IS '해당 상품 상세를 본 횟수(view_product)';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.ADD_TO_CART_COUNT IS '장바구니 담기 횟수(add_to_cart)';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.PURCHASE_COUNT IS '구매 횟수(purchase)';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.REVIEW_COUNT IS '리뷰 작성(write_review)';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.AS_REQUEST_COUNT IS 'AS 요청(as_request)';
COMMENT ON COLUMN PRODUCT_METRICS_DAILY.CONVERSION_RATE IS '구매수 / 조회수';



CREATE TABLE SESSION_METRICS_DETAIL (
  METRIC_DATE           DATE,
  SESSION_ID            VARCHAR2(50),
  MEMBER_ID             VARCHAR2(30),
  SESSION_START_TS      TIMESTAMP,
  SESSION_END_TS        TIMESTAMP,
  SESSION_DURATION_SEC  NUMBER,
  EVENT_COUNT           NUMBER,
  CONSTRAINT PK_SESSION_METRICS_DETAIL
    PRIMARY KEY (METRIC_DATE, SESSION_ID)
);

COMMENT ON TABLE SESSION_METRICS_DETAIL IS
'일자 x 세션별 체류 정보 (세션 시작/끝, 체류시간, 이벤트수).';

COMMENT ON COLUMN SESSION_METRICS_DETAIL.SESSION_DURATION_SEC IS
'초 단위 체류 시간 (END - START).';

CREATE TABLE SESSION_METRICS_DAILY (
  METRIC_DATE             DATE PRIMARY KEY,
  AVG_SESSION_SEC         NUMBER,
  AVG_EVENT_PER_SESSION   NUMBER,
  SESSION_COUNT           NUMBER
);

COMMENT ON TABLE SESSION_METRICS_DAILY IS
'일자별 세션 품질 요약 (평균 세션 체류시간, 세션당 이벤트 수, 세션 수).';



CREATE TABLE BOUNCE_METRICS_DAILY (
  METRIC_DATE        DATE,
  LANDING_PAGE       VARCHAR2(200),
  LANDING_SESSIONS   NUMBER,
  BOUNCED_SESSIONS   NUMBER,
  BOUNCE_RATE        NUMBER(10,4),
  CONSTRAINT PK_BOUNCE_METRICS_DAILY
    PRIMARY KEY (METRIC_DATE, LANDING_PAGE)
);

COMMENT ON TABLE BOUNCE_METRICS_DAILY IS
'일자별 랜딩 페이지 이탈율 (상품 상세 클릭 없이 떠난 세션 비율).';

CREATE TABLE CART_ITEMS (
  CART_ID       NUMBER PRIMARY KEY,
  MEMBER_ID     VARCHAR2(30) NOT NULL,      -- LG_MEMBER.MEMBER_ID
  PRODUCT_ID    VARCHAR2(10) NOT NULL,      -- LG_PRODUCT.PRODUCT_ID
  ADDED_AT      DATE DEFAULT SYSDATE
);

COMMENT ON TABLE CART_ITEMS IS '사용자가 장바구니에 담은 상품 내역(즉시 구매 안 했어도 관심 표현)';
COMMENT ON COLUMN CART_ITEMS.CART_ID IS '장바구니PK';
COMMENT ON COLUMN CART_ITEMS.MEMBER_ID IS '사용자 ID';
COMMENT ON COLUMN CART_ITEMS.PRODUCT_ID IS '상품 ID';
COMMENT ON COLUMN CART_ITEMS.ADDED_AT IS '담은 시각';

DROP SEQUENCE SEQ_CART_ITEMS; 
DROP SEQUENCE SEQ_PRODUCT_REVIEW; 
DROP SEQUENCE SEQ_AS_REQUEST; 

CREATE SEQUENCE SEQ_CART_ITEMS
  START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;


CREATE SEQUENCE SEQ_PRODUCT_REVIEW
  START WITH 2600 INCREMENT BY 1 NOCACHE NOCYCLE;


CREATE SEQUENCE SEQ_AS_REQUEST
  START WITH 30 INCREMENT BY 1 NOCACHE NOCYCLE;
